<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg" sizes="32x32" href="./imgs/bb-8-svgrepo-com.svg">
    <link rel="stylesheet" href="style.css">
    <title>Overlord Space Invaders</title>
</head>

<body>
    <div class="main">
        <div class="info-popup" id="popUp">
            <img src="./imgs/bb-8-svgrepo-com.svg" alt="General Bot">
            <h2>Space Alert</h2>
            <p>Hey there commander! This is your sergent speaking &#128511; </p>
            <p>Below are some tips in getting more points (SEI) &#128176; </p>
            <ul>
                <li>You can earn points by killing space aliens &#128128; </li>
                <li>You can earn points by completing tasks &#128203; </li>
                <li>You can earn points by inviting your friends to play together with you &#129309; </li>
                <li>Don't forget to check the leaderboard every week to see how far you've come in your journey
                    commander! &#128509; </li>
                <li>The top 10 players on the leaderboard would be credited SEI so do not fail to collect as many points
                    as you can commander! &#129297; </li>
            </ul>
            <button type="button" class="roger" id="myButton">Roger General!</button>
        </div>

        <div class="hero-img">
            <img src="./imgs/bb-8-svgrepo-com.svg" alt="hero image">
        </div>
        <h1>Web3 Space Overlords</h1>
        <div class="progress-container">
            <div class="progress">
                <div class="progress__fill"></div>
                <span class="progress__text">0%</span>
            </div>
        </div>
        <div class="btn-container">
            <button type="button" class="start" id="startButton" disabled>
                <span>Start Game</span>
            </button>
        </div>
    </div>





    <script type="module">
        // Function to update the progress bar
        function updateProgressBar(progressBar, value) {
            value = Math.round(value);
            progressBar.querySelector(".progress__fill").style.width = `${value}%`;
            progressBar.querySelector(".progress__text").textContent = `${value}%`;
        }

        // Function to animate the progress bar from 0 to 100
        function animateProgressBar(progressBar, duration) {
            let value = 0
            const internalDuration = duration / 100; // Time to increment each percentage

            // Disable the start button initially
            const startButton = document.getElementById('startButton');
            startButton.disabled = true;

            const interval = setInterval(() => {
                if (value >= 100) {
                    clearInterval(interval)

                    // Enable the start button when progress is 100%
                    startButton.disabled = false;

                    // Add pulse animation to button
                    startButton.classList.add('pulse');
                } else {
                    value++;
                    updateProgressBar(progressBar, value);
                }
            }, internalDuration);
        }

        // Select the progress bar element
        const pgBar = document.querySelector(".progress");

        // Start the animation for 5 seconds (5000 milliseconds)
        animateProgressBar(pgBar, 5000);

        let popup = document.getElementById("popUp");
        // let closePopup = document.getElementById("close-popup");

        startButton.addEventListener("click", function () {
            popup.classList.add("open-popup");
        });

        function loadPage(url) {
            window.location.href = url;
        }

        document.getElementById("myButton").addEventListener('click', function () {
            loadPage('./pages/killZone.html');
        });
    </script>
</body>

</html>